import{h as b,u as y}from"./useAuth-2ec42edf.js";import{u as N}from"./useAuthButtons-9e7fcd42.js";import{a9 as f,d as _,e as l,a as r,b as u,j as k,r as S,o as c,c as U,g as n,Q as s,f as T,i as g}from"./index-e1b9afb8.js";import{A}from"./constant-caca95d8.js";function x(e){const a=e.uploadTime&&e.uploadTime.length>0&&e.uploadTime[0],d=e.uploadTime&&e.uploadTime.length>0&&e.uploadTime[1],p=e.authTime&&e.authTime.length>0&&e.authTime[0],i=e.authTime&&e.authTime.length>0&&e.authTime[1];return f.get(`/admin/content/shortVideo/list/${e.pageSize}/${e.pageNum}`,{title:e.title,author:e.author,authStatus:e.authStatus,tagName:e.tagName,uploadStartTime:a,uploadEndTime:d,authStartTime:p,authEndTime:i})}function v(){return f.get("/admin/content/shortVideo/tag")}const B=_({__name:"index",setup(e){const{BUTTONS:a}=N(),d=[{type:"selection",fixed:"left",width:80},{prop:"id",label:"Id",width:80},{prop:"title",label:"标题",width:120,search:{el:"input",props:{placeholder:"请输入标题名称"}}},{prop:"postUrl",label:"封面",width:250,render:({row:t})=>l(r("el-image"),{style:"width: 200px; height: 100px",src:t.postUrl,fit:"cover"},null)},{prop:"src",label:"视频",width:100,render:()=>l(r("el-button"),{type:"primary"},{default:()=>[u("播放")]})},{prop:"tagName",label:"标签",enum:v,search:{el:"select",props:{placeholder:"请选择标签"}},render:({row:t})=>l("span",null,[t.tagName])},{prop:"author",label:"上传者",search:{el:"input",props:{placeholder:"请输入上传者名称"}}},{prop:"phone",label:"手机号"},{prop:"authStatus",label:"审核状态",width:100,render:({row:t})=>t.authStatus===0?"不通过":"通过",enum:k(()=>A||[]),search:{el:"select",props:{placeholder:"请选择审核状态"}}},{prop:"authName",label:"审核管理员",width:120},{prop:"uploadTime",label:"上传时间",width:120,search:{el:"date-picker",props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{prop:"authTime",label:"审核时间",width:120,search:{el:"date-picker",props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{prop:"status",label:"状态",width:100,render:({row:t})=>l(r("el-switch"),{modelValue:t.status,"onUpdate:modelValue":o=>t.status=o},null)},{prop:"operation",label:"操作",fixed:"right",width:180}],p=S(),i=async t=>{const o=t==="新增"?b("btn.UserNormal.add1"):b("btn.UserNormal.update2");await y(o)};return(t,o)=>{const h=r("el-button"),w=r("ProTable");return c(),U("div",null,[l(w,{ref_key:"proTable",ref:p,columns:d,requestApi:s(x)},{tableHeader:n(()=>[l(h,{type:"primary",icon:"Plus",disabled:!s(a)["btn.UserNormal.add"],onClick:o[0]||(o[0]=m=>i("新增"))},{default:n(()=>[u(" 新增 ")]),_:1},8,["disabled"])]),operation:n(m=>[m.row.status!==1?(c(),T(h,{key:0,type:"primary",link:"",icon:"Edit",disabled:!s(a)["btn.UserNormal.update"],onClick:o[1]||(o[1]=V=>i("编辑"))},{default:n(()=>[u(" 编辑 ")]),_:1},8,["disabled"])):g("",!0),m.row.status!==1?(c(),T(h,{key:1,type:"primary",link:"",icon:"Delete",disabled:!s(a)["btn.UserNormal.view"]},{default:n(()=>[u(" 删除 ")]),_:1},8,["disabled"])):g("",!0)]),_:1},8,["requestApi"])])}}});export{B as default};
