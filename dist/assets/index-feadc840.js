import{h,u as _}from"./useAuth-2ec42edf.js";import{u as x}from"./useAuthButtons-9e7fcd42.js";import{a9 as k,d as v,e as r,a as n,F as B,j as N,b as s,r as w,a8 as S,o as c,c as C,g as o,Q as i,f as b,i as f}from"./index-e1b9afb8.js";import{S as U}from"./constant-caca95d8.js";import{u as A}from"./useHandleData-9b50ca4a.js";function D(t){const l=t.createTime&&t.createTime.length>0&&t.createTime[0],u=t.createTime&&t.createTime.length>0&&t.createTime[1];return k.get(`/admin/user/manager/list/${t.pageSize}/${t.pageNum}`,{name:t.name,phone:t.phone,sex:t.sex,startTime:l,endTime:u})}const M=v({__name:"index",setup(t){const{BUTTONS:l}=x(),u=[{prop:"id",label:"UserId",width:80,fixed:"left"},{prop:"name",label:"用户名",fixed:"left",search:{el:"input",props:{placeholder:"请输入用户名"}}},{prop:"avatar",label:"头像",width:100,render:({row:e})=>r(B,null,[r(n("el-avatar"),{size:50,src:e.avatar},null)])},{prop:"phone",label:"手机号",width:140,search:{el:"input",props:{placeholder:"请输入手机号"}}},{prop:"sex",label:"性别",width:100,render:({row:e})=>e.sex===0?"男":"女",fieldNames:{label:"name",value:"id"},enum:N(()=>U||[]),search:{el:"select",props:{placeholder:"请选择性别"}}},{prop:"onlineStatus",label:"在线状态",width:100,render:({row:e})=>e.onlineStatus===0?r(n("el-tag"),{type:"success"},{default:()=>[s("离线")]}):r(n("el-tag"),{type:"info"},{default:()=>[s("离线")]})},{prop:"createTime",label:"创建时间",width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{prop:"status",label:"状态",width:100,render:({row:e})=>r(n("el-switch"),{modelValue:e.status,"onUpdate:modelValue":a=>e.status=a,"active-text":e.status?"启用":"禁用",onClick:()=>T(e)},null)},{prop:"operation",label:"操作",fixed:"right",width:180}],g=w(),m=async e=>{const a=e==="新增"?h("btn.UserNormal.add1"):h("btn.UserNormal.update2");await _(a)},T=async e=>{await A(S,{type:"manager",id:e.id,status:e.status==1?0:1},`切换【${e.name}】用户状态`)};return(e,a)=>{const d=n("el-button"),y=n("ProTable");return c(),C("div",null,[r(y,{ref_key:"proTable",ref:g,columns:u,requestApi:i(D)},{tableHeader:o(()=>[r(d,{type:"primary",icon:"Plus",disabled:!i(l)["btn.UserNormal.add"],onClick:a[0]||(a[0]=p=>m("新增"))},{default:o(()=>[s(" 新增 ")]),_:1},8,["disabled"])]),operation:o(p=>[p.row.status!==1?(c(),b(d,{key:0,type:"primary",link:"",icon:"Edit",disabled:!i(l)["btn.UserNormal.update"],onClick:a[1]||(a[1]=E=>m("编辑"))},{default:o(()=>[s(" 编辑 ")]),_:1},8,["disabled"])):f("",!0),p.row.status!==1?(c(),b(d,{key:1,type:"primary",link:"",icon:"Delete",disabled:!i(l)["btn.UserNormal.view"]},{default:o(()=>[s(" 删除 ")]),_:1},8,["disabled"])):f("",!0)]),_:1},8,["requestApi"])])}}});export{M as default};
