import{h as b,u as y}from"./useAuth-2ec42edf.js";import{u as g}from"./useAuthButtons-9e7fcd42.js";import{a9 as _,d as N,e as a,a as r,b as u,j as k,r as S,o as c,c as U,g as i,Q as p,f as T,i as f}from"./index-e1b9afb8.js";import{A}from"./constant-caca95d8.js";function x(e){const l=e.uploadTime&&e.uploadTime.length>0&&e.uploadTime[0],s=e.uploadTime&&e.uploadTime.length>0&&e.uploadTime[1],d=e.authTime&&e.authTime.length>0&&e.authTime[0],n=e.authTime&&e.authTime.length>0&&e.authTime[1];return _.get(`/admin/content/post/list/${e.pageSize}/${e.pageNum}`,{title:e.title,author:e.author,authStatus:e.authStatus,uploadStartTime:l,uploadEndTime:s,authStartTime:d,authEndTime:n})}const V=N({__name:"index",setup(e){const{BUTTONS:l}=g(),s=[{type:"selection",fixed:"left",width:80},{prop:"id",label:"Id",width:80},{prop:"title",label:"标题",width:120,search:{el:"input",props:{placeholder:"请输入标题名称"}}},{prop:"postUrl",label:"封面",width:250,render:({row:t})=>a(r("el-image"),{style:"width: 200px; height: 100px",src:t.postUrl,fit:"cover"},null)},{prop:"src",label:"视频",width:100,render:()=>a(r("el-button"),{type:"primary"},{default:()=>[u("播放")]})},{prop:"typeName",label:"类型"},{prop:"tagName",label:"标签"},{prop:"author",label:"发布者",search:{el:"input",props:{placeholder:"请输入标题名称"}}},{prop:"phone",label:"手机号"},{prop:"authStatus",label:"审核状态",width:100,render:({row:t})=>t.authStatus===0?"不通过":"通过",enum:k(()=>A||[]),search:{el:"select",props:{placeholder:"请选择VIP等级"}}},{prop:"authName",label:"审核管理员",width:120},{prop:"uploadTime",label:"发布时间",width:120,search:{el:"date-picker",props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{prop:"authTime",label:"审核时间",width:120,search:{el:"date-picker",props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{prop:"status",label:"状态",width:100,render:({row:t})=>a(r("el-switch"),{modelValue:t.status,"onUpdate:modelValue":o=>t.status=o},null)},{prop:"operation",label:"操作",fixed:"right",width:180}],d=S(),n=async t=>{const o=t==="新增"?b("btn.UserNormal.add1"):b("btn.UserNormal.update2");await y(o)};return(t,o)=>{const h=r("el-button"),w=r("ProTable");return c(),U("div",null,[a(w,{ref_key:"proTable",ref:d,columns:s,requestApi:p(x)},{tableHeader:i(()=>[a(h,{type:"primary",icon:"Plus",disabled:!p(l)["btn.UserNormal.add"],onClick:o[0]||(o[0]=m=>n("新增"))},{default:i(()=>[u(" 新增 ")]),_:1},8,["disabled"])]),operation:i(m=>[m.row.status!==1?(c(),T(h,{key:0,type:"primary",link:"",icon:"Edit",disabled:!p(l)["btn.UserNormal.update"],onClick:o[1]||(o[1]=v=>n("编辑"))},{default:i(()=>[u(" 编辑 ")]),_:1},8,["disabled"])):f("",!0),m.row.status!==1?(c(),T(h,{key:1,type:"primary",link:"",icon:"Delete",disabled:!p(l)["btn.UserNormal.view"]},{default:i(()=>[u(" 删除 ")]),_:1},8,["disabled"])):f("",!0)]),_:1},8,["requestApi"])])}}});export{V as default};
